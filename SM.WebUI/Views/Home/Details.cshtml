@model  SM.Core.ViewModel.PostViewModel.PostDetailsViewModel





<head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<div>
    <br />
    <br />

    <div class="col-md-2">
        <img class="img-responsive" src="~/Content/PostImages/@Model.Post.Image" />
    </div>
    <div class="col-md-10">
        <dl class="dl-horizontal">


            <dt>
                @Html.DisplayNameFor(model => model.Post.Title)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Post.Title)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Post.Description)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Post.Description)
            </dd>


            <dt></dt>
            <dd>@Html.ActionLink("Back to List", "Index")</dd>
        </dl>
    </div>
     
    <div class="card card-outline-secondary my-4">
        <div class="card-header">
            Post Reviews.
        </div>
    <div class="card-body">
        @if(Model.Comments!=null && Model.Comments.Count>0)
         {
            foreach(var comment in Model.Comments)
                {
                  <p>@comment.Text</p>
                  <small class="text-muted">
                      Posted by @comment.UserID on @comment.TimeStamp
                  </small>

                  <hr/>
                }
         }
         else
         {
            <p>There are No Comments on This Post.</p>
         }

    </div>
    </div>

    <form id="commentForm">
        <input type="text" name="PostID" value="@Model.Post.Id" />
        <div class="form-group">
            <label>Write your Comment</label>
            <textarea class="form-control" rows="3" name="Text" placeholder="Write your comment"></textarea>
        </div>
        <button class="btn btn-success" id="btnComment" type="button"> Leave Your Comment.</button>
    </form>
</div>
<div class="col-md-12 clearfix"></div>

<script>
    $("#btnComment").click(function ()
    {
        $.ajax({
            url: "@Url.Action("LeaveComment","Home")",
            type : "post",
            data: $("#commentForm").serialize()
        }).done(function (response) {
           /* debugger;*/
            if (response.Success) {
                window.location.reload();
            }
            else {
                swal("Error!", response.Message, "error");
            }
        }).fail(function () {
            swal("Error!", "Error Occured.Please Try Again", "error")
        });
    });
    
</script>
